name: ğŸ­ Actualizar Eventos en Google Sheets

on:
  # Ejecutar automÃ¡ticamente Lunes y Viernes a las 9:00 AM UTC
  schedule:
    - cron: '0 9 * * 1,5'
  
  # Permitir ejecuciÃ³n manual
  workflow_dispatch:

jobs:
  extraer-eventos:
    runs-on: ubuntu-latest
    
    steps:
      # 1. Descargar el repositorio
      - name: ğŸ“¥ Checkout repositorio
        uses: actions/checkout@v4
      
      # 2. Configurar Python
      - name: ğŸ Configurar Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      # 3. Instalar Chrome
      - name: ğŸŒ Instalar Chrome
        uses: browser-actions/setup-chrome@latest
        with:
          chrome-version: stable
      
      # 4. Instalar dependencias
      - name: ğŸ“¦ Instalar dependencias
        run: |
          pip install --upgrade pip
          pip install -r scripts/requirements.txt
      
      # 5. Ejecutar extractor (escribe en Google Sheets)
      - name: ğŸ­ Extraer eventos y escribir en Sheets
        env:
          GOOGLE_CREDENTIALS: ${{ secrets.GOOGLE_CREDENTIALS }}
        run: |
          cd scripts
          python extractor_a_sheets.py
